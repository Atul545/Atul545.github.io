(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5801],{977:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sign-up",function(){return a(60828)}])},4069:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(11057),i=a(90948);let n=(0,i.ZP)(r.Z,{target:"e1at1r4r0"})("margin-bottom:0.5rem;font-size:1.1rem;")},49334:function(e,t,a){"use strict";a.d(t,{Hc:function(){return n},gU:function(){return o}});var r=a(90948);let i=(0,r.ZP)("div",{target:"e6r9y6e0"})("width:85%;max-width:1600px;margin:0 auto;margin-top:2rem;padding:0.5em;"),n=(0,r.ZP)("div",{target:"e6r9y6e1"})("width:85%;max-width:800px;margin:0 auto;padding-top:1rem;"),o=(0,r.ZP)("div",{target:"e6r9y6e2"})("width:90%;margin:0 auto;padding:0.5em;");t.ZP=i},18554:function(e,t,a){"use strict";a.d(t,{h:function(){return n}});var r=a(67294),i=a(17853);function n(e){let{setBreadcrumbs:t}=(0,i.Io)();(0,r.useEffect)(()=>{t(e)},[JSON.stringify(e)])}},48468:function(e,t,a){"use strict";a.d(t,{o:function(){return o},s:function(){return s}});var r=a(57632),i=a(60708);let n="https://tmc.mooc.fi/api/v8";function o(e){e.username=(0,r.Z)();let t={user:e,user_field:{first_name:e.first_name,last_name:e.last_name},origin:"mooc.fi",language:"fi"};return new Promise((e,a)=>{fetch("".concat(n,"/users"),{body:JSON.stringify(t),method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>{t.json().then(t=>{t.success?e(t):a(t.errors)})})})}async function s(e,t){let a=(0,i.hP)(void 0);if(!a)throw Error("not logged in?");let r=await fetch("".concat(n,"/users/current?show_user_fields=1&extra_fields=1"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});if(!r.ok)throw Error("error fetching existing user");let o=await r.json(),s={...o,user_field:{...o.user_field,first_name:e,last_name:t}},l=await fetch("".concat(n,"/users/").concat(o.id),{method:"PUT",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});return l.json()}},89759:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(11163),i=a.n(r),n=a(62286),o=a.n(n);function s(e){var t,a;let{context:r,target:n,savePage:s=!0,shallow:l=!0}=e;s&&(null==r?void 0:r.pathname)&&o().set(r,"redirect-back",JSON.stringify({as:r.asPath,href:r.pathname}),{maxAge:1200,path:"/"}),(null==r?void 0:null===(t=r.res)||void 0===t?void 0:t.writeHead)&&(null==r?void 0:null===(a=r.res)||void 0===a?void 0:a.end)?(r.res.writeHead(307,{Location:n}),r.res.end()):i().push(n,n,{shallow:l})}},4650:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(35944),i=a(67294),n=a(60708),o=a(89759);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return t=>{var a;return(a=class extends i.Component{static async getInitialProps(a){var r;let i=(0,n.jF)(a);return i&&(0,o.Z)({context:a,target:e,shallow:!1}),{...await (null===(r=t.getInitialProps)||void 0===r?void 0:r.call(t,a)),signedIn:i}}render(){return this.props.signedIn?(0,r.tZ)("div",{children:"Redirecting..."}):(0,r.tZ)(t,{...this.props,children:this.props.children})}}).displayName="withSignedOut(".concat(t.name||t.displayName||"AnonymousComponent",")"),a}}},60828:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var r=a(35944),i=a(11163),n=a.n(i),o=a(49334),s=a(67294),l=a(98456),u=a(23795),m=a(90629),d=a(50135),c=a(15861),h=a(90948),f=a(4069),p=a(48468),g=a(60708),v=a(25141),b=a(77019);let w=(0,h.ZP)(m.Z,{target:"e16embpn0"})("display:flex;flex-direction:column;align-items:center;padding:1em;margin-top:2em;margin-bottom:2em;"),x=(0,h.ZP)("div",{target:"e16embpn1"})("margin-bottom:1.5rem;"),y=(0,h.ZP)("form",{target:"e16embpn2"})("width:100%;"),Z=(0,h.ZP)(c.Z,{target:"e16embpn3"})("margin:1em;"),k=(0,h.ZP)("div",{target:"e16embpn4"})("margin-bottom:2rem;"),_=(0,h.ZP)(c.Z,{target:"e16embpn5"})("margin-bottom:2rem;"),P=(0,v.ZP)(b.Z);class S extends s.Component{componentDidMount(){let e=()=>{this.setState({email:"",password:"",password_confirmation:"",first_name:"",last_name:""})};setTimeout(e,200),setTimeout(e,500),setTimeout(e,1e3)}render(){var e,t;let a=P(null!==(e=this.props.router.locale)&&void 0!==e?e:"fi");return(0,r.BX)(w,{children:[(0,r.tZ)(Z,{component:"h1",variant:"h4",gutterBottom:!0,align:"center",children:a("signupTitle")}),(0,r.BX)(y,{onChange:this.validate,children:[(0,r.tZ)(_,{component:"p",paragraph:!0,children:a("formInfoText")}),(0,r.tZ)(x,{children:(0,r.tZ)(d.Z,{variant:"outlined",type:"email",name:"email",autoComplete:"lolled",label:a("formLabelEmail"),placeholder:a("formLabelEmail"),error:this.state.errorObj.email,fullWidth:!0,value:this.state.email,onChange:this.handleInput,onBlur:()=>{this.setState({validateEmail:!0},()=>{this.validate()})}})}),(0,r.tZ)(x,{children:(0,r.tZ)(d.Z,{variant:"outlined",type:"text",label:a("formLabelFirstName"),placeholder:a("formLabelFirstName"),name:"first_name",autoComplete:"lolled",fullWidth:!0,value:this.state.first_name,onChange:this.handleInput})}),(0,r.tZ)(x,{children:(0,r.tZ)(d.Z,{variant:"outlined",type:"text",label:a("formLabelLastName"),placeholder:a("formLabelLastName"),name:"last_name",autoComplete:"lolled",fullWidth:!0,value:this.state.last_name,onChange:this.handleInput})}),(0,r.tZ)(x,{children:(0,r.tZ)(d.Z,{variant:"outlined",type:this.state.showPassword?"text":"password",label:a("formLabelPassword"),placeholder:a("formLabelPassword"),name:"password",autoComplete:"lolled",error:this.state.errorObj.password,fullWidth:!0,value:this.state.password,onChange:this.handleInput})}),(0,r.tZ)(x,{children:(0,r.tZ)(d.Z,{variant:"outlined",type:this.state.showPassword?"text":"password",label:a("formLabelPasswordAgain"),placeholder:a("formLabelPasswordAgain"),name:"password_confirmation",autoComplete:"lolled",error:this.state.errorObj.password_confirmation,fullWidth:!0,value:this.state.password_confirmation,onChange:this.handleInput,onBlur:()=>{this.setState({validatePassword:!0},()=>{this.validate()})}})}),(0,r.tZ)(x,{children:(0,r.tZ)(f.Z,{onClick:this.onClick,disabled:null!==(t=this.state.submitting)&&void 0!==t?t:!this.state.canSubmit,variant:"contained",color:"secondary",fullWidth:!0,type:"submit",children:this.state.submitting?(0,r.tZ)(l.Z,{size:20}):a("signupTitle")})})]}),(0,r.tZ)(x,{children:(0,r.tZ)(u.Z,{href:"/sign-in",children:a("signIn")})}),this.state.error&&(0,r.tZ)(k,{children:(0,r.BX)("b",{children:[" ",a("error")," ",this.state.error]})})]})}constructor(e){super(e),this.onClick=async e=>{var t,a,r;e.preventDefault();let i=P(null!==(t=this.props.router.locale)&&void 0!==t?t:"fi",this.props.router);if(this.setState({submitting:!0,triedSubmitting:!0}),!this.validate()){this.setState({canSubmit:!1,submitting:!1});return}try{await (0,p.o)({email:this.state.email,first_name:this.state.first_name,last_name:this.state.last_name,password:this.state.password,password_confirmation:this.state.password_confirmation}),await (0,g.zB)({email:null!==(a=this.state.email)&&void 0!==a?a:"",password:null!==(r=this.state.password)&&void 0!==r?r:"",redirect:!1}),this.props.onComplete()}catch(e){try{let t="";Object.entries(e).forEach(e=>{let a=e[0],r=e[1];r.forEach(e=>{var r;let n=(r="".concat(a.replace(/_/g," ")," ").concat(e,".")).charAt(0).toUpperCase()+r.slice(1);"Email has already been taken."===n&&(n=i("emailTaken")),t="".concat(t," ").concat(n)})}),""===t&&(t=i("commonProblem")+JSON.stringify(e)),this.setState({error:t,submitting:!1,errorObj:e})}catch(t){this.setState({error:JSON.stringify(e),submitting:!1})}this.setState({submitting:!1})}},this.handleInput=e=>{let t=e.target.name,a=e.target.value;this.setState({[t]:a},()=>{this.validate()})},this.validate=()=>{var e;let t=P(null!==(e=this.props.router.locale)&&void 0!==e?e:"fi"),a={error:"",errorObj:{}},{email:r,password:i,password_confirmation:n,validatePassword:o,validateEmail:s,triedSubmitting:l}=this.state;return(r&&s&&(-1===r.indexOf("@")&&(a.error+=t("emailNoAt"),a.errorObj.email=!0),r&&-1===r.indexOf(".")&&(a.error+=t("emailNoPoint"),a.errorObj.email=!0)),i&&n&&o&&i!==n&&(a.error+=t("passwordNoMatch"),a.errorObj.password=!0,a.errorObj.password_confirmation=!0),""===a.error&&(a.error=!1,a.canSubmit=!0),r&&i&&n)?(this.setState(a),!a.error):(l&&(a.canSubmit=!1),!1)},this.state={email:"",password:"",password_confirmation:"",first_name:"",last_name:"",submitting:!1,error:!1,errorObj:{},validatePassword:!1,validateEmail:!1,canSubmit:!0,triedSubmitting:!0}}}var j=(0,i.withRouter)(S),N=a(83957),O=a(99959),L=a(18554),C=a(23404),T=a(4650);let E=()=>{let e=(0,C.I)(b.Z);(0,L.h)([{translation:"signUp",href:"/sign-up"}]);let{addAlert:t}=(0,N.oX)(),{logInOrOut:a}=(0,O.Rj)(),i=()=>{a(),n().push("/research-consent"),t({title:e("confirmEmailTitle"),message:e("confirmEmailInfo"),severity:"info",ignorePages:[n().pathname,"/research-consent"]}),window.scrollTo(0,0)};return(0,r.tZ)("div",{children:(0,r.tZ)(o.Hc,{children:(0,r.tZ)(j,{onComplete:i})})})};var I=(0,T.Z)()(E)},77019:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var r={en:JSON.parse('{"signupTitle":"Create an account","emailTaken":"You e-mail address is already in use. Have you previously done mooc.fi courses?","commonProblem":"Problem creating an account: ","emailNoAt":"There is no \'@\' -sign in the e-mail address.","emailNoPoint":"There is no \'.\' in the e-mail address.","passwordNoMatch":"The passwords did not match.","researchNotAnswered":"Please answer the research question.","formLabelEmail":"E-mail address","formLabelFirstName":"First name","formLabelLastName":"Last name","formLabelPassword":"Password","formLabelPasswordAgain":"Repeat password","formInfoText":"Here you can create a new account which works on most mooc.fi courses and services. If you have participated in mooc.fi courses before, you can use your existing account on login page.","error":"Error: ","signIn":"Already have an account? Log in.","confirmEmailTitle":"Your MOOC.fi account has been created.","confirmEmailInfo":"We have sent an confirmation e-mail to your e-mail address. Please check your e-mail and confirm the address.","submit":"Submit","errorResearchSubmit":"There was an error saving your answer. You can change it in your profile later."}'),fi:JSON.parse('{"signupTitle":"Luo k\xe4ytt\xe4j\xe4tunnus","emailTaken":"S\xe4hk\xf6postiosoitteesi on jo k\xe4yt\xf6ss\xe4. Oletko tehnyt aikaisemmin mooc.fi:n kursseja?","commonProblem":"Ongelma tunnuksen luonnissa. Virhe oli: ","emailNoAt":"S\xe4hk\xf6postiosoitteessa ei ole \'@\'-merkki\xe4. ","emailNoPoint":"S\xe4hk\xf6postiosoitessa ei ole \'.\'-merkki\xe4. ","passwordNoMatch":"Salasana ja salasana uudestaan eiv\xe4t olleet samoja. ","researchNotAnswered":"Valitse osallistutko tutkimukseen. ","formLabelEmail":"S\xe4hk\xf6postiosoite","formLabelFirstName":"Etunimi","formLabelLastName":"Sukunimi","formLabelPassword":"Salasana","formLabelPasswordAgain":"Salasana uudestaan","formInfoText":"T\xe4ll\xe4 sivulla voit luoda uuden tunnuksen, joka toimii suurimmassa osassa mooc.fi:n kursseissa ja palveluissa. Jos olet aikaisemmin tehnyt mooc.fi -kursseja, voit k\xe4ytt\xe4\xe4 sis\xe4\xe4nkirjautumissivulla olemassaolevia tunnuksiasi.","error":"Virhe: ","signIn":"Onko sinulla jo k\xe4ytt\xe4j\xe4tunnus? Kirjaudu sis\xe4\xe4n","confirmEmailTitle":"MOOC.fi -k\xe4ytt\xe4j\xe4tunnuksesi on luotu","confirmEmailInfo":"Olemme l\xe4hett\xe4neet s\xe4hk\xf6postiisi s\xe4hk\xf6postiosoitteen varmistuslinkin. K\xe4y nyt s\xe4hk\xf6postissasi ja varmista osoitteesi.","submit":"L\xe4het\xe4","errorResearchSubmit":"Virhe vastauksen tallennuksessa. Voit yritt\xe4\xe4 vastata my\xf6hemmin uudelleen profiilisivullasi."}')}},57632:function(e,t,a){"use strict";let r;a.d(t,{Z:function(){return u}});let i="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var n={randomUUID:i};let o=new Uint8Array(16);function s(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}let l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));var u=function(e,t,a){if(n.randomUUID&&!t&&!e)return n.randomUUID();e=e||{};let r=e.random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){a=a||0;for(let e=0;e<16;++e)t[a+e]=r[e];return t}return function(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}(r)}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=977)}),_N_E=e.O()}]);